{"version":3,"sources":["../../src/utils/get-image.js"],"names":["getImage","cacheImageResults","Map","url","has","preservePromiseMethods","get","responseType","then","response","set","catch","error","result","Error","Promise","reject","resolve"],"mappings":";;;;;kBAIwBA,Q;;AAJxB;;;;;;AAEA,IAAMC,oBAAoB,IAAIC,GAAJ,EAA1B;;AAEe,SAASF,QAAT,CAAkBG,GAAlB,EAAuB;AACpC,MAAIF,kBAAkBG,GAAlB,CAAsBD,GAAtB,CAAJ,EAAgC;AAC9B,WAAOE,uBAAuBJ,kBAAkBK,GAAlB,CAAsBH,GAAtB,CAAvB,CAAP;AACD;;AAED,SAAO,gBAAMG,GAAN,CAAUH,GAAV,EAAe,EAAEI,cAAc,aAAhB,EAAf,EACJC,IADI,CACC,UAACC,QAAD,EAAc;AAClBR,sBAAkBS,GAAlB,CAAsBP,GAAtB,EAA2BM,QAA3B;AACA,WAAOA,QAAP;AACD,GAJI,EAKJE,KALI,CAKE,UAACC,KAAD,EAAW;AAChBX,sBAAkBS,GAAlB,CAAsBP,GAAtB,EAA2BS,KAA3B;AACA,WAAOA,KAAP;AACD,GARI,EASJJ,IATI,CASCH,sBATD,CAAP;AAUD;;AAED,SAASA,sBAAT,CAAgCQ,MAAhC,EAAwC;AACtC,MAAIA,kBAAkBC,KAAtB,EAA6B;AAC3B,WAAOC,QAAQC,MAAR,CAAeH,MAAf,CAAP;AACD;;AAED,SAAOE,QAAQE,OAAR,CAAgBJ,MAAhB,CAAP;AACD","file":"get-image.js","sourcesContent":["import axios from 'axios';\n\nconst cacheImageResults = new Map();\n\nexport default function getImage(url) {\n  if (cacheImageResults.has(url)) {\n    return preservePromiseMethods(cacheImageResults.get(url));\n  }\n\n  return axios.get(url, { responseType: 'arraybuffer' })\n    .then((response) => {\n      cacheImageResults.set(url, response);\n      return response;\n    })\n    .catch((error) => {\n      cacheImageResults.set(url, error);\n      return error;\n    })\n    .then(preservePromiseMethods);\n}\n\nfunction preservePromiseMethods(result) {\n  if (result instanceof Error) {\n    return Promise.reject(result);\n  }\n\n  return Promise.resolve(result);\n}\n"]}